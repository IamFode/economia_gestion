epa <- read.table("../Dat/EPA/EPA_2021T2.csv", header=TRUE, sep="", na.strings="NA", dec=".", strip.white=TRUE) # Carga de los microdatos de un trimestre de EPA
View(epa)
dim(epa)
names(epa)
head(epa)
View(epa)
edit(epa)
str(epa$SEXO1)
summary(epa$SEXO1)
head(epa$SEXO1)
head(epa$SEXO1)
epa$SEXO<- factor(epa$SEXO1)
epa$SEXO
table(epa$SEXO1)
levels(epa$SEXO)<- c("H", "M")
levels(epa$SEXO) <- c("H", "M")
epa&SEXO
epa&SEXO
View(epa)
View(epa)
epa&SEXO1
epa&SEXO1
str(epa$SEXO1)
head(epa$SEXO1)
summary(epa$SEXO1)
table(epa$SEXO1)
epa$SEXO <- factor(epa$SEXO1)
levels(epa$SEXO) <- c("H", "M")
table(epa$SEXO) # distribución de frecuencias
x<- table(epa$SEXO)
barplot(x, main = "Diagrama de barras", xlab = "Edad", ylab="frecuencia")
prop.table(x) # distribución de frecuencias relativas
prop.table(x) *100
rm(x)
table(epa$SEXO)/length(epa$SEXO)*100
sum(table(epa$SEXO))
sum(epa$FACTOREL) # Factor de elevación de la muestra por diversos atributos
xtabs(FACTOREL~SEXO, data=epa) # Distribución de frecuencias ponderadas por el factor de elevación
xtabs(FACTOREL~SEXO, data=epa)/sum(epa$FACTOREL)*100
# Situación laboral
table(epa$AOI)
epa$OPI=factor(epa$AOI) # Agrupación de AOI en: Ocupados, parados e inactivos
levels(epa$OPI)=c("O","O","P","P","I","I","I")
table(epa$OPI)
table(epa$OPI)/length(epa$OPI)*100
xtabs(FACTOREL~OPI, data=epa)/sum(epa$FACTOREL)*100 # Distribución de frecuencias ponderadas por el factor de elevación
# Rangos de edad
table(epa$EDAD1)
epa$REDAD<- cut(epa$EDAD1, breaks = c(-1, 16, 30, 65) ) # Variable agrupada en intervalos
table(epa$REDAD)
sum(table(epa$REDAD))
levels(epa$REDAD)[1]<- "[0,20]"
table(epa$REDAD)
# Salvo en fichero una copia de los datos de EPA ya preparados
write.csv2(epa, file="../Dat/EPA/EPA_2021T2_prep.csv")
source("1.Preparar.EPA.R")
source("1.Preparar.EPA.R")
read.csv2(file="../Dat/EPA/EPA_2021T2_prep.csv",encoding = "UTF8")
epa <- read.csv2(file="../Dat/EPA/EPA_2021T2_prep.csv",encoding = "UTF8")
# Análisis univariante de EDAD
x <- epa$EDAD1
mean(x)
summary(x)
mean(x,na.rm=TRUE)
var(x) # csivarianza (varianza muestral)
sd(x)
var(x)*(length(x)-1)/length(x)
var(x)*(length(x)-1)/length(x) # varianza poblacional
mean((x-mean(x))^2)
sd(x)
var(x)*(length(x)-1)/length(x) # varianza poblacional
var(x) # cuasivarianza (varianza muestral)
mean((x-mean(x))^2)
var(x) # cuasivarianza (varianza muestral)
var(x)*(length(x)-1)/length(x) # varianza poblacional
mean((x-mean(x))^2)
sqrt(var(x)*(length(x)-1)/length(x)) # varianza poblacional
sd(x)
sqrt(var(x)*(length(x)-1)/length(x))mean(x) # coheficiente de variación
sqrt(var(x)*(length(x)-1)/length(x))/mean(x) # coheficiente de variación
cv = function(x){ #Fucnión que calculo el coeficiente de variación de un vector de datos x
sqrt(var(x)*(length(x)-1)/length(x))/mean(x)
}
source("Funciones.R")
cv(x)
quantile(x)
median(x)
quantile(x,0.92)
table(x)
## cómo crear una función moda
t <- table(x)
sort(t)
sort(t, TRUE)
sort(t, TRUE)[1]
source("Funciones.R")
moda(x)
## Gráficas
hist(x)
plot(density(x)) # represetación no paramétrica del histograma
hist(x, freq = FALSE)
lines(density(x),col = "red")
boxplot(x)
## Filtros
### Filtros horizontales --> variable condicionada
dat <- subset(epa, EDAD1>=16) #sobre toda la tabla
dat <- epa[epa$EDAD1>=16 & epa$SEXO == "M",]
dat <- epa[epa$EDAD1>=16 | epa$SEXO == "M",]
### Filtros verticales --> Selecionar variables
dat <- epa[epa$EDAD1>=16,"SEXO"]
### Filtros verticales --> Selecionar variables
dat <- epa[epa$EDAD1>=16,c("SEXO", "EDAD1")]
x <- dat$SEXO
y <- dat$EDAD1
by(y,x,mean)
source("Funciones.R")
source("1.Preparar.EPA.R")
by(y,x,cv)
E
y <- dat$EDAD1
by(y,x,mean) #media condicionada de la edad para cada sexo
by(y,x,cv)
source("Funciones.R")
source("1.Preparar.EPA.R")
#----------Análisis bivariante----------
x <- dat$SEXO
y <- dat$EDAD1
by(y,x,mean) #media condicionada de la edad para cada sexo
by(y,x,cv)
aggregate(y,list(x),mean) # tabla de la media
boxplot(y~x)
boxplot(y~x)
### Filtros verticales --> Selecionar variables
dat <- epa[epa$EDAD1>=16,c("SEXO", "EDAD1","REDAD")]
e
epa <- read.csv2(file="../Dat/EPA/EPA_2021T2_prep.csv",encoding = "UTF8")
### Filtros verticales --> Selecionar variables
dat <- epa[epa$EDAD1>=16,c("SEXO", "EDAD1","REDAD")]
table(x,y)
table(x,epa$REDAD)
table(x,dat$REDAD)
summ(table(x,dat$REDAD)/length(x)) # frecuencias relativas
sum(table(x,dat$REDAD)/length(x)) # frecuencias relativas
table(x,dat$REDAD)/length(x) # frecuencias relativas
prop.table(table(x, dat$REDAD), 1)
prop.table(table(x, dat$REDAD), 2)
prop.table(table(x, dat$REDAD), 1) # tabla de contingencias condicionada por filas
prop.table(table(x, dat$REDAD), 2) # tabla de contingencias condicionada por columnas
rm(x,y,t)
## Crear estadística los parados
aggregate(FACTOREL~SEXO,data = dat, sum)
### Filtros verticales --> Selecionar variables
dat <- epa[epa$EDAD1>=16,c("SEXO", "EDAD1","REDAD","FACTOREL")]
## Crear estadística los parados
aggregate(FACTOREL~SEXO,data = dat, sum)
### Filtros verticales --> Selecionar variables
dat <- epa[epa$EDAD1>=16,c("SEXO", "EDAD1","REDAD","FACTOREL","OPI")]
## Crear estadística los parados
aggregate(FACTOREL~SEXO,data = dat[dat$OPI=="P",], sum) #
## Crear estadística los parados
aggregate(FACTOREL~SEXO,data = dat[dat$OPI=="P",], length)
parados <- aggregate(FACTOREL~SEXO,data = dat[dat$OPI=="P",], sum)
names(parados)[2] <- "Parados"
parados <- aggregate(FACTOREL~SEXO,data = dat[dat$OPI=="P",], sum)
parados
names(parados)[2] <- "Parados"
parados
names(parados)[2] <- "Num Parados"
parados
names(parados)[2] <- "NumParados"
parados
activos <- aggregate(FACTOREL~SEXO,data = dat[dat$OPI!="I",], sum)
names(activos)[2] <- "NumActivos"
activos
### taza de parados
# fucionar dos tablas
merge(parados,activos)
s_epa$TasaParo <- s_epa$NumParados / s_epa$NumActivos
### taza de parados
s_epa <- merge(parados,activos) # fucionar dos tablas
s_epa$TasaParo <- s_epa$NumParados / s_epa$NumActivos
### taza de parados
s_epa <- merge(parados,activos) # fucionar dos tablas
s_epa$TasaParo <- s_epa$NumParados / s_epa$NumActivos*100
s_epa
diff(s_epa[,3]) # diferencia de parados
write.csv2(s_epa, file="../Dat/EPA/TasaParados.csv")
rm(epa,dat,parados,activos,s_epa)
